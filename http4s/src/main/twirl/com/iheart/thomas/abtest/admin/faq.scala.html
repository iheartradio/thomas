@import com.iheart.thomas.http4s.UIEnv
@import com.iheart.thomas.html._
@import play.twirl.api.Html

@()(implicit env: UIEnv)

@item(question: String, answer: String, index: Int) = {
    <div class="card border-start-0 border-end-0 border-bottom-0" style="border-radius: 0%;--bs-border-opacity: .5;">
        <a class="btn btn-link link-dark" data-bs-toggle="collapse" data-bs-target="#collapse@index" role="button" aria-expanded="false" aria-controls="collapse@index">
            <div class="card-head"><h4 style="float: left;">@question</h4> </div>
        </a>
        <div class="collapse" id="collapse@index">
            <div class="card-body">@Html(answer)</div>
        </div>
    </div>
}

@topNav("Frequently Asked Questions", "FAQ") {
<div class="row justify-content-md-center">
    <div class="col-md-8 col-xl-6 mt-5">

        @item("How to create a new feature?",
            """On 'A/B Tests' page, click 'Create Test'.
              |In the dropdown menu, type in the name of the new feature under 'For a new feature', then click 'New Test' button.
              |You will be directed to 'Creating a new A/B Test' page.
              |On this page, you will have to fill in the details of the first test, and hit 'Submit' button, or the new feature won't be created.
              |""".stripMargin,
            0)
        @item("How to create a new test?",
            """On 'A/B Tests' page, click 'Create Test'.
              |In the dropdown menu, look for your feature name under 'Or for an existing feature' and select it.
              |Hit 'New Test' button.
              |You will be directed to 'Creating a new A/B Test' page.
              |On this page, you will fill in the details of the test. The name, the time window, and group information is necessary.
              |""".stripMargin,
            1)
        @item("How to modify a test?",
            """Unfortunately, you can't modify a test itself, but you can easily clone the test with the same details, modify it, and launch the new test.
              |On 'A/B Tests' page, look for the feature and test you want to modify.
              |Click the test name and you will be directed to the test page.
              |Click 'Create Follow Up' button, and a new test with the same details from the previous test will pop up.
              |Modify what you need and remember to check 'Start Immediately' box so that your change will go into effect right away.
              |Click 'Create' button and your modified test will be alive.
              |""".stripMargin,
            2)
        @item("How to terminate a test?",
            """On 'A/B Tests' page, locate your feature using 'Show Feature' function.
              |Once you select the feature, you can see all the active and past tests under it.
              |To terminate the active test, click the test and you will be directed to the test page.
              |Find and hit 'Terminate' button at bottom right of the page.
              |You will be directed to 'Creating a new A/B Test' page.
              |""".stripMargin,
            3)
        @item("How to test an A/B test with user profiles?",
            """On 'Assignments' page, you can get a user profile's A/B assignment.
              |You will need to supply the user id along with other information.
              |Hit the 'Get Assignments' button and results will pop up at the bottom.
              |""".stripMargin,
            4)
        @item("How to add overrides?",
            """An override is to manually set A/B group for an id.
              |On 'A/B Tests' page, find your feature and go into that feature.
              |On your right, in the 'Overrides' section, type in the user id and the desired A/B group name.
              |Hit the 'Update' button at the bottom to save your change.
              |You can verify the outcome by following 'How to test an A/B test with user profiles?'
              |""".stripMargin,
            5)
        @item(s"How to set user meta criteria?",
            s"""User meta criteria is used to control user eligibility.
              |The value of your criteria should be a JSON object that is flat with string values only.
              |E.g. I want only web APP users in US to be eligible for this feature test, the criteria should be
              |<pre class="bg-light">
              |[ {
              |
              |  "platform" : "web"
              |
              |}, {
              |
              |  "country" : {
              |    "%in" : [ "us" ]
              |  }
              |
              |} ]
              |</pre>
              |The following example lists most of the criteria
              |<pre class="bg-light">
              |{
              |
              |       "sex" : "female",                   //matches users whose "sex" field is exactly "female"
              |
              |       "description" : {
              |          "%regex" : "[shinny|fancy]"      //matches users whose "description" field matches a regex "[shinny|fancy]"
              |       },
              |
              |       "device" : {
              |         "%in": ["iphone","ipad"]          //matches users whose "device" is one of the two strings "iphone" and "ipad"
              |       },
              |
              |       "%or": {                            //matches users whose "city" is "LA" or "state" is "NY"
              |         "city": "LA",
              |         "state": "NY"
              |       },
              |
              |       "age" : {
              |          "%gt" : 32                       //matches age older than 32, other compartor includes %ge, %lt and %le
              |       },
              |
              |       "clientVer": {
              |         "%versionStart" : "1.0.0"         //special filter for version strings. Matches users whose "clientVer" is later than "1.0.0"
              |       },
              |
              |       "androidVer": {
              |         "%versionRange" : ["2.0", "3.1"] //special filter for version strings. Matches users whose "androidVer" is between than "2.0" and "3.1"
              |       }
              |}
              |</pre>
              |For more information, check <a class="text-decoration-underline" target="_blank" href="${env.docUrl}/thomas/#advanced-eligibility-control--targeted-audience-">this doc</a> out
              |""".stripMargin,
            6)
        @item("How to find a feature?",
            """You can use the 'Show Features' dropdown menu on 'A/B Tests' page to search for a feature.
              |The features are sorted alphabetically.
              |""".stripMargin,
            7)

        </div>
    </div>
</div>

<script>
</script>
}