@import com.iheart.thomas.abtest.model._
@import lihua._
@import java.time.Instant
@import com.iheart.thomas.html._

@(test: Entity[Abtest], errMessage: Option[String] = None, spec: Option[AbtestSpec] = None)

@main("A/B Test for feature " + test.data.feature) {
<form action="/admin/tests/@test._id" method="post">
  <div class="mt-4 mb-4">
    <span class="h5">
      @if(test.data.canChange(Instant.now)) {
      Editing A/B Test <span class="text-info">@test.data.name</span>
        } else {
        Creating A New Revision of A/B Test
        }
      for </span>
    <span class="h4 text-success" title="This is feature name for the test.">@test.data.feature</span>
  </div>
  @abtestForm(test.data.feature, spec.orElse(Some(test.data.toSpec)), errMessage, false)

  <div class="row d-flex flex-row-reverse mt-5">
    <div class="mr-4">
      <button type="submit" class="btn btn-primary">
        @if(test.data.canChange(Instant.now)) {
        Submit Change
        } else {
        Create New Revision
        }
      </button>
      <button type="button" class="btn btn-warning ml-2" onclick="history.back()">Cancel</button>
    </div>
  </div>

</form>
}