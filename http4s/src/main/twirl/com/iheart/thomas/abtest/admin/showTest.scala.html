@import com.iheart.thomas.abtest.model._
@import lihua._
@import java.time.Instant
@import com.iheart.thomas.html._

@(test: Entity[Abtest])
@import com.iheart.thomas.http4s.Formatters._

@main("A/B Test for feature " + test.data.feature) {

<a href="../tests">
  <h6 class="mb-4 mt-4 text-secondary"><< Back to tests</h6>
</a>

<form action="#" method="post">
  <span class="h5">A/B Test for </span>
  <span class="h4 text-primary" title="This is feature name for the test.">@test.data.feature</span>
<span class="badge ml-3 mb-3 badge-@formatStatus(test)._2">
              @formatStatus(test)._1
            </span>

<span class="text-muted h6 small">@test._id</span>
@abtestForm(test.data.feature, Some(test.data.toSpec), None, true)

</form>

<div class="row d-flex flex-row-reverse mt-5">
  <div class="mr-4">
    @if(test.data.canChange(Instant.now)) {
    <a href="@test._id/edit" >
      <button class="btn btn-primary">Edit</button>
    </a>
    <a href="@test._id/delete"
       onclick="return confirm('Are you sure you would like to delete this test?');">
      <button class="btn btn-warning">Delete</button>
    </a>
    } else {
    <a href="@test._id/edit" >
      <button class="btn btn-primary">New Revision</button>
    </a>
    @if(test.data.statusAsOf(Instant.now) == Abtest.Status.InProgress) {
    <a href="@test._id/delete"
       onclick="return confirm('Are you sure you would like to terminate this test?');">
      <button class="btn btn-warning">Terminate</button>
    </a>
    }

    }
  </div>
</div>





}


