@import com.iheart.thomas.abtest.model._
@import lihua._
@import java.time.Instant
@import com.iheart.thomas.html._
@(test: Entity[Abtest])
@import com.iheart.thomas.http4s.Formatters._

@main("A/B Test for feature " + test.data.feature) {

<a href="../tests">
  <h5 class="mb-4 mt-4"><< Back to tests</h5>
</a>

<form action="#" method="post">
<span class="badge ml-3 mb-3 badge-@formatStatus(test)._2">
              @formatStatus(test)._1
            </span>
  @abtestForm(Some(test.data.toSpec), None, true)


</form>



@if(test.data.canChange(Instant.now)) {
<a href="@test._id/edit" >
  <button class="btn btn-primary mt-5">
    Edit
  </button>
</a>
<a href="@test._id/delete"
   onclick="return confirm('Are you sure you would like to delete this test?');">
  <button class="btn btn-warning mt-5">
    Delete
  </button>
</a>
} else {
<a href="@test._id/edit" >
  <button class="btn btn-primary mt-5">
    New Revision
  </button>
</a>
@if(test.data.statusAsOf(Instant.now) == Abtest.Status.InProgress) {
<a href="@test._id/delete"
   onclick="return confirm('Are you sure you would like to terminate this test?');">
  <button class="btn btn-warning mt-5">
    Terminate
  </button>
</a>
}

}




}


