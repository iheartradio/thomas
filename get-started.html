<!DOCTYPE html><html><head><title>thomas: Get Started</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="@kailuowang" /><meta name="description" content="Thomas, a library for A/B tests" /><meta name="og:image" content="/thomas/img/poster.png" /><meta name="image" property="og:image" content="/thomas/img/poster.png" /><meta name="og:title" content="thomas: Get Started" /><meta name="title" property="og:title" content="thomas: Get Started" /><meta name="og:site_name" content="thomas" /><meta name="og:url" content="https://github.com/iheartradio/thomas" /><meta name="og:type" content="website" /><meta name="og:description" content="Thomas, a library for A/B tests" /><link rel="icon" type="image/png" href="/thomas/img/favicon.png" /><meta name="twitter:title" content="thomas: Get Started" /><meta name="twitter:image" content="/thomas/img/poster.png" /><meta name="twitter:description" content="Thomas, a library for A/B tests" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/thomas/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/thomas/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/thomas/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/thomas/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/thomas/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/thomas/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/thomas/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/thomas/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/thomas/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/thomas/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/thomas/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/thomas/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/thomas/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/thomas/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/thomas/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/thomas/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/thomas/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/thomas/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/thomas/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/thomas/img/favicon310x150.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/thomas/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/thomas/css/light-style.css" /></head><body class="page"><nav id="navigation" aria-labelledby="main-navigation"><div class="navbar-wrapper container"><div class="navigation-brand"><a href="/thomas/" class="brand background-mask"><div class="page-icon-wrapper"></div><span class="brand-title">thomas</span></a></div><div class="navigation-menu"><ul><li><a href="https://github.com/iheartradio/thomas" target="_blank" rel="noopener noreferrer"><i class="nav-item-icon fa fa-lg fa-github" hidden="true"></i><span class="nav-item-text">GitHub</span></a></li><li><a href="/thomas/api/com/iheart/thomas/index.html"><i class="nav-item-icon fa fa-lg fa-file-text" hidden="true"></i><span class="nav-item-text">API Documentation</span></a></li></ul></div></div></nav><nav class="menu-container" aria-labelledby="section-navigation"><div id="horizontal-menu"><ul class="horizontal-nav"><li><a class="" href="/thomas/">Home</a></li><li><a class=" active " href="/thomas/get-started.html">Get Started</a></li><li><a class="" href="/thomas/core.html">Core concepts</a></li><li><a class="" href="/thomas/FAQ.html">FAQ</a></li><li><a class="" href="/thomas/bayesian.html">Bayesian Analysis</a></li></ul></div></nav><main id="site-main" class="page-site-main"><section class="use"><div class="container"><div id="content"><h2 id="guide-to-to-setup-an-ab-test-platform-using-thomas">Guide to to setup an A/B test platform using Thomas</h2>

<h3 id="step-1-setup-a-mongo-cluster-for-thomas">Step 1 setup a Mongo cluster for Thomas</h3>

<p>Thomas needs a basic data store to store test metadata. Since the amount of data is quite small and Thomas strives keep the data in memory, the requirement for this data store is minimum. Thomas is designed in a way so that it can support different data stores. As of now, only one MongoDB is supported through the module <code class="language-plaintext highlighter-rouge">thomas-mongo</code>. For local development, you just need to install and run a MongoDB instance locally.</p>

<p>You can run one locally using docker</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-p</span> 27017-27019:27017-27019 <span class="nt">--name</span> mongodb mongo
</code></pre></div></div>
<h3 id="step-1a-optional-setup-dynamo-cluster">Step 1a (Optional) setup dynamo cluster</h3>

<p>If you want to try the Multi Arm Bandit Engine you need a dynamo cluster, you can use Docker to run one locally</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-p</span> 8042:8000 amazon/dynamodb-local
</code></pre></div></div>

<h3 id="step-2-create-a-http-service-application-using-either-thomas-http4s-or-thomas-play">Step 2 create a http service application using either thomas-http4s or thomas-play</h3>

<p><code class="language-plaintext highlighter-rouge">thomas-core</code> provides the core functionality through <a href="https://iheartradio.github.io/thomas/api/com/iheart/thomas/API.html">a facade API</a>. If your product is using the typical server-client architecture, you can either incorporate this library into your existing service (it needs to be scala compatible though), or set up a standalone http service to serve this API.</p>

<h4 id="step-2-option-1-incorporate-thomas-core-library-into-existing-scala-http-service-application">Step 2 Option 1: incorporate Thomas-core library into existing scala http service application</h4>

<p>Basically you need to instantiate the <a href="https://iheartradio.github.io/thomas/api/com/iheart/thomas/API.html">Thomas facade API</a> and have your http service delegate to it. To instantiate this API you need an implementation of the data access layer. Right now thomas-mongo provide one for the MongoDB.</p>

<p>Since the instance maintains DB connection pool, it’s a resource that needs to be managed. Depending on the paradigm of your existing http service application, you can follow <a href="https://iheartradio.github.io/thomas/api/com/iheart/thomas/http4s/AbtestService$.html">the example in thomas-http4s</a> if it’s pure functional, or <a href="https://iheartradio.github.io/thomas/api/com/iheart/thomas/play/APIProvider.html">the example in thomas-play</a> if it’s more traditionally OO.</p>

<p>If you choose to set up a standalone service, you can utilize either <code class="language-plaintext highlighter-rouge">thomas-http4s</code> or <code class="language-plaintext highlighter-rouge">thomas-play</code>.</p>

<h4 id="step-2-option-2a-setting-up-with-http4s">Step 2 Option 2a: Setting up with http4s</h4>

<p>Create a new Scala project and in build.sbt add</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>libraryDependencies += "com.iheart" %% "thomas-http4s" % ThomasVersion
</code></pre></div></div>
<p>Then add a <code class="language-plaintext highlighter-rouge">Main</code> object by following the example of<code class="language-plaintext highlighter-rouge">ExampleAbtestServerApp</code> in http4Example</p>

<p><code class="language-plaintext highlighter-rouge">sbt run</code> shall start the service locally.</p>

<p>To config MongoDB host you can add this to an <code class="language-plaintext highlighter-rouge">application.conf</code> in your resource folder.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mongoDB.hosts = ["localhost:27017"]
</code></pre></div></div>

<p>If you want to use the Web UI, create another new Scala project and in build.sbt add</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>libraryDependencies += "com.iheart" %% "thomas-http4s" % ThomasVersion
</code></pre></div></div>

<p>Then add a <code class="language-plaintext highlighter-rouge">Main</code> object by following the example of<code class="language-plaintext highlighter-rouge">ExampleAbtestAdminUIApp</code> in http4Example</p>

<p><code class="language-plaintext highlighter-rouge">sbt run</code> shall start the Web UI locally.</p>

<h4 id="step-2-option-2b-setting-up-with-play-framework">Step 2 Option 2b: Setting up with Play framework</h4>

<p>Setting up a play application involves a little more effort.</p>

<p>First create a new blank play application by following []the instructions here](https://www.playframework.com/getting-started).</p>

<p>Then in build.sbt add</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>libraryDependencies += "com.iheart" %% "thomas-play" % ThomasVersion
</code></pre></div></div>

<p>Then clone the Thomas code base from github and copy all files from underneath playExample to your new play application.</p>

<p>Then assuming you have a local MongoDB instance already up and running</p>

<p><code class="language-plaintext highlighter-rouge">sbt run</code> shall start the service locally.</p>

<p>Note that although these steps help you set up a basic http service for Thomas, it’s likely that you might want to modify or enhance this service, e.g. add monitoring, logging, integration with an authentication system etc. Thomas, as a library, is designed such that it won’t stand in the way however you want to build your service.</p>

<h3 id="step-3-include-group-assignments-in-analytics-event-report">Step 3 include group assignments in analytics event report</h3>

<p>Nothing Thomas can help here. To analyze the results, your client code needs to include the group assignments in the event metadata reported to your analytics platform.</p>

<h3 id="step-4-optional-write-integration-with-your-analytics">Step 4 (Optional) write integration with your analytics</h3>

<p>Your analytics platform probably support you to run A/B test results analysis. To use the Bayesian analysis tool though, you need to write 
an integration layer to help Thomas retrieve the data needed for such analysis. Please refer to <a href="bayesian.html">this dedicated page for running Bayesian analysis using Thomas</a>.</p>

</div></div></section></main><footer id="site-footer"><div class="container"><div class="row"><p>thomas is designed and developed by <a href="https://github.com/iheartradio/thomas" target="_blank" rel="noopener noreferrer">@kailuowang</a></p></div><div class="row"><div><p>Website built with <a href="https://47degrees.github.io/sbt-microsites/" target="_blank" rel="noopener noreferrer">sbt-microsites</a> - © 2019 <a href="https://www.47deg.com/" target="_blank" rel="noopener noreferrer">47 Degrees</a></p></div></div></div></footer><script src="/thomas/highlight/highlight.pack.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script>((window.gitter = {}).chat = {}).options = {
room: 'iheartradio/thomas'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/thomas/js/version-selector.js"></script></body></html>